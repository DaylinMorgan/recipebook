<div id="wrapper" class="recipe">
  <!-- recipe (details inserted with Hugo) -->
  {{ with .Params.image }}
  <section id="heroimage">
    <img src="{{ . }}" />
  </section>
  {{ end }}
  <section id="title">
    <h1>{{ .Title }}</h1>
  </section>
  <section id="info"></section>
  <section id="ingredients">
    <h2>ingredients</h2>
    {{ with .Params.Ingredients }}
    <ul>
      <!-- list ingredients that make up recipe -->
      {{ range . }}
      <li>{{ . }}</li>
      {{ end }} {{end}}
    </ul>
  </section>
  <section id="steps">
    <h2>steps</h2>
    <ol>
      <!-- list direction that make up recipe -->
      {{ range .Params.Directions }}
      <li>{{ . }}</li>
      {{end}}
    </ol>
  </section>
  <hr />
  {{ if .Params.notes }}
  <section id="notes">
    <h2>notes</h2>
    <ul>
      {{ range .Params.notes}}
      <li>{{ . }}</li>
      {{ end }}
    </ul>
  </section>
  {{ end }}
  <section id="help">
    <h2>help!</h2>
    <ul>
      <li>
        <a href="https://www.google.com/search?tbm=isch&q={{ .Title }}">Image search</a>
      </li>
      <li>
        <a href="https://www.google.com/search?q={{ .Title }} recipes">More recipes</a>
      </li>
    </ul>
  </section>

  {{ if .Params.basedon }}
  <section id="basedon">
    <h2>based on</h2>
    <ul>
      {{ range $index, $element := .Params.basedon.link }}
      {{ $linknum := add $index 1 }}
      <li><a href="{{ . }}">Ref. Link {{ $linknum }}</a></li>
      {{ end }}

      {{ range $index, $element := .Params.basedon.image }}
      {{ $linknum := add $index 1 }}
      <li><a href="{{ . }}">Ref. Image {{ $linknum }}</a></li>
      {{ end }}
    </ul>
    {{ end }}
  </section>

  <!-- links to related recipes -->
  {{ if or .Params.tags .Params.cuisine .Params.category}}
  <section id="related">
    <h2>related recipes</h2>
    {{ if .Params.tags }}
    <strong>tags:</strong>
      {{ range $key, $value := .Params.tags }}
    <a href="/tags/{{ $value | urlize }}">{{ $value }}</a>{{ if ne $key (sub (len $.Params.tags) 1) }},
      {{ else }}{{ end }}
    {{ end }}
    </br>
    {{ end }}

    {{ if .Params.cuisine }}
    <strong>cuisines:</strong>
      {{ range $key, $value := .Params.cuisine }}
    <a href="/cuisine/{{ $value | urlize }}">{{ $value }}</a>{{ if ne $key (sub (len $.Params.cuisine) 1) }},
      {{ else }}{{ end }}
    {{ end }}
    </br>
    {{ end }}

    {{ if .Params.category }}
    <strong>categories:</strong>
      {{ range $key, $value := .Params.category }}
    <a href="/category/{{ $value | urlize }}">{{ $value }}</a>{{ if ne $key (sub (len $.Params.category) 1) }},
      {{ else }}{{ end }}
    {{ end }}
    </br>
    {{ end }} 

  </section>
  {{end}}
</div>